<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Password Strength Checker</title>
  <style>
    :root {
      --bg: #0f1724;
      --card: #0b1220;
      --muted: #9aa4b2;
      --good: #16a34a;
      --warn: #f59e0b;
      --bad: #ef4444;
    }

    html, body {
      height: 100%;
      margin: 0;
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      background: linear-gradient(180deg, #071021, #071830);
      color: #e6eef6;
    }

    .wrap {
      max-width: 720px;
      margin: 48px auto;
      padding: 22px;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.01));
      border-radius: 12px;
      box-shadow: 0 8px 30px rgba(2, 6, 23, 0.6);
    }

    h1 {
      font-size: 20px;
      margin: 0 0 6px;
    }

    p.lead {
      margin: 0 0 18px;
      color: var(--muted);
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
    }

    .input-row {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    input[type="password"] {
      flex: 1;
      padding: 10px 12px;
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.06);
      background: transparent;
      color: inherit;
      outline: none;
      font-size: 15px;
    }

    .strength {
      height: 12px;
      background: rgba(255, 255, 255, 0.04);
      border-radius: 999px;
      overflow: hidden;
      margin-top: 12px;
    }

    .strength > i {
      display: block;
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, var(--bad), var(--warn));
      transition: width 220ms ease, background 220ms ease;
    }

    .criteria {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 14px;
    }

    .crit {
      display: flex;
      gap: 10px;
      align-items: center;
      color: var(--muted);
      font-size: 14px;
    }

    .crit .dot {
      width: 14px;
      height: 14px;
      border-radius: 50%;
      display: inline-block;
      background: rgba(255, 255, 255, 0.04);
    }

    .crit.ok {
      color: var(--good);
    }

    .crit.warn {
      color: var(--warn);
    }

    .score {
      font-weight: 700;
      margin-left: 6px;
    }

    .meta {
      margin-top: 14px;
      color: var(--muted);
      font-size: 13px;
    }

    .small {
      font-size: 12px;
      color: var(--muted);
    }

    @media (max-width: 520px) {
      .wrap {
        margin: 18px;
        padding: 16px;
      }
    }
  </style>
</head>
<body>
  <main class="wrap" role="main">
    <h1>Password Strength Checker</h1>
    <p class="lead">Type a password and see live feedback ‚Äî uses RegEx, input event listeners, and a dynamic strength bar.</p>

    <label for="pwd">Password</label>
    <div class="input-row">
      <input id="pwd" type="password" autocomplete="new-password" placeholder="Enter password..." aria-describedby="pwd-help" />
      <button type="button" id="togglePwd" style="background:transparent;border:none;cursor:pointer;font-size:18px;color:#e6eef6">üëÅÔ∏è</button>
    </div>

    <div class="strength" aria-hidden="true"><i id="strength-bar"></i></div>
    <div class="meta small" id="pwd-help">Strength: <span id="strength-text">‚Äî</span></div>

    <div class="criteria" id="criteria">
      <div class="crit" data-check="length"><span class="dot"></span>At least 8 characters</div>
      <div class="crit" data-check="lower"><span class="dot"></span>Lowercase letter (a-z)</div>
      <div class="crit" data-check="upper"><span class="dot"></span>Uppercase letter (A-Z)</div>
      <div class="crit" data-check="digit"><span class="dot"></span>Digit (0-9)</div>
      <div class="crit" data-check="special"><span class="dot"></span>Special character (!@#$%^&* etc.)</div>
    </div>

    <p class="small" style="margin-top:14px">Tip: longer + varied character classes = stronger password.</p>
  </main>

  <script>
    // Regex rules
    const rules = {
      length: /^.{8,}$/,
      lower: /[a-z]/,
      upper: /[A-Z]/,
      digit: /[0-9]/,
      special: /[^A-Za-z0-9\s]/
    };

    // Scoring weights (you can tweak these)
    const weights = { length: 2, lower:1, upper:1, digit:1, special:2 };

    // Elements
    const pwd = document.getElementById('pwd');
    const bar = document.getElementById('strength-bar');
    const txt = document.getElementById('strength-text');
    const criteriaEls = document.querySelectorAll('.crit');

    function evaluate(password){
      const result = {};
      for(const key in rules){ result[key] = rules[key].test(password); }
      return result;
    }

    function scoreFromResults(res, password){
      // base score from matching criteria
      let score = 0;
      for(const k in res){ if(res[k]) score += weights[k] || 1; }
      // add small bonus for very long passwords
      if(password.length >= 12) score += 1;
      if(password.length >= 16) score += 1;
      return score; // integer
    }

    function normalizeScore(score){
      // possible max = sum(weights) + 2 bonus = 2+1+1+1+2 + 2 = 9
      const max = Object.values(weights).reduce((a,b)=>a+b,0) + 2;
      return Math.min(1, Math.max(0, score / max));
    }

    function strengthLabel(r){
      if(r >= 0.85) return {text:'Very Strong', color:'#16a34a', pct:100};
      if(r >= 0.65) return {text:'Strong', color:'#22c55e', pct:80};
      if(r >= 0.45) return {text:'Medium', color:'#f59e0b', pct:60};
      if(r > 0) return {text:'Weak', color:'#ef4444', pct:35};
      return {text:'‚Äî', color:'transparent', pct:0};
    }

    function updateUI(password){
      const res = evaluate(password);
      // update criteria list
      criteriaEls.forEach(el => {
        const key = el.getAttribute('data-check');
        el.classList.toggle('ok', !!res[key]);
      });

      const sc = scoreFromResults(res, password);
      const norm = normalizeScore(sc);
      const label = strengthLabel(norm);

      // update bar
      bar.style.width = label.pct + '%';
      // CSS gradient depends on width; set background color inline for better contrast
      if(label.pct === 0) bar.style.background = 'linear-gradient(90deg, rgba(255,255,255,0.0), rgba(255,255,255,0.0))';
      else if(label.pct < 60) bar.style.background = 'linear-gradient(90deg, var(--bad), var(--warn))';
      else if(label.pct < 80) bar.style.background = 'linear-gradient(90deg, var(--warn), var(--good))';
      else bar.style.background = 'linear-gradient(90deg, var(--good), #06b6d4)';

      txt.textContent = label.text;
    }

    // Debounce helper to avoid too frequent recalcs on fast typing
    function debounce(fn, wait){
      let t;
      return function(...a){ clearTimeout(t); t = setTimeout(()=>fn.apply(this,a), wait); };
    }

    const onInput = debounce(e => updateUI(e.target.value), 80);

    // Attach listeners
    pwd.addEventListener('input', onInput);

    const toggle = document.getElementById('togglePwd');
    toggle.addEventListener('click', () => {
      const type = pwd.type === 'password' ? 'text' : 'password';
      pwd.type = type;
      toggle.textContent = type === 'password' ? 'üëÅÔ∏è' : 'üôà';
    });

    pwd.addEventListener('input', onInput);
    pwd.addEventListener('paste', e => {
      // evaluate pasted value synchronously
      const pasted = (e.clipboardData || window.clipboardData).getData('text');
      // small timeout to let the paste finish
      setTimeout(()=> updateUI(pwd.value || pasted), 20);
    });

    // accessibility: show result for empty on load
    updateUI('');

    // Optional: expose a function to get feedback programmatically
    window.passwordFeedback = function(value){
      const res = evaluate(value);
      const sc = scoreFromResults(res, value);
      const norm = normalizeScore(sc);
      return { matches: res, score: sc, normalized: norm };
    };
  </script>
</body>
</html>
